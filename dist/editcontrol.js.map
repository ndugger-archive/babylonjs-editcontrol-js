{"version":3,"sources":["webpack:///webpack/bootstrap 886df2509aaa5571e4d3","webpack:///./src/editcontrol.js","webpack:///external \"babylonjs\"","webpack:///./src/acthist.js","webpack:///./src/act.js"],"names":[],"mappings":"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","file":"editcontrol.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 886df2509aaa5571e4d3\n **/","import BABYLON from 'babylonjs';\nimport ActHist from './acthist';\n\nconst { Axis, Color3, Mesh, Space, StandardMaterial, Vector3 } = BABYLON;\n\nexport default class EditControl {\n\n    meshPicked = null;\n    canvas = null;\n    scene = null;\n    mainCamera = null;\n    theParent = null;\n    local = true;\n    snapT = false;\n    snapR = false;\n    transSnap = 1;\n    rotSnap = Math.PI / 18;\n    axesLen = 0.4;\n    axesScale = 1;\n    redMat = null;\n    greenMat = null;\n    blueMat = null;\n    whiteMat = null;\n    yellowMat = null;\n    actHist = null;\n    renderer = null;\n    pointerdown = null;\n    pointerup = null;\n    pointermove = null;\n\n    constructor (mesh, camera, canvas, scale) {\n        this.meshPicked = mesh;\n        this.canvas = canvas;\n        this.axesScale = scale;\n\n        this.scene = mesh.getScene();\n        this.mainCamera = camera;\n        this.actHist = new ActHist(mesh, 10);\n\n        mesh.computeWorldMatrix(true);\n\n        this.theParent = new Mesh('EditControl', this.scene);\n        this.theParent.position = this.meshPicked.position;\n        this.theParent.visibility = 0;\n        this.theParent.isPickable = false;\n\n        this.createMaterials(this.scene);\n        this.createGuideAxes();\n        this.guideCtl.parent = this.theParent;\n        this.createPickPlane();\n        this.pickPlane.parent = this.theParent;\n\n        this.pointerdown = this::this.onPointerDown;\n        this.pointerup = this::this.onPointerUp;\n        this.pointermove = this::this.onPointerMove;\n\n        canvas.addEventListener('pointerdown', this.pointerdown, false);\n        canvas.addEventListener('pointerup', this.pointerup, false);\n        canvas.addEventListener('pointermove', this.pointermove, false);\n\n        this.setLocalAxes(mesh);\n        this.renderer = this::this.renderLoopProcess;\n        this.scene.registerBeforeRender(this.renderer);\n    }\n\n    renderLoopProcess () {\n        this.setAxesScale();\n        this.theParent.position = this.meshPicked.position;\n        this.onPointerOver();\n    }\n\n    switchTo (mesh) {\n        mesh.computeWorldMatrix(true);\n        this.meshPicked = mesh;\n        this.setLocalAxes(mesh);\n        this.actHist = new ActHist(mesh, 10);\n    }\n\n    setUndoCount (c) {\n        this.actHist.setCapacity(c);\n    }\n\n    undo () {\n        this.actHist.undo();\n        this.meshPicked.computeWorldMatrix(true);\n        this.setLocalAxes(this.meshPicked);\n    }\n\n    redo () {\n        this.actHist.redo();\n        this.meshPicked.computeWorldMatrix(true);\n        this.setLocalAxes(this.meshPicked);\n    }\n\n    detach () {\n        this.canvas.removeEventListener('pointerdown', this.pointerdown, false);\n        this.canvas.removeEventListener('pointerup', this.pointerup, false);\n        this.canvas.removeEventListener('pointermove', this.pointermove, false);\n        this.scene.unregisterBeforeRender(this.renderer);\n        this.disposeAll();\n    }\n\n    disposeAll () {\n        this.theParent.dispose();\n        this.disposeMaterials();\n        this.actHist = null;\n    }\n\n    pDown = false;\n\n    axisPicked = null;\n\n    onPointerDown (evt) {\n        evt.preventDefault();\n        this.pDown = true;\n\n        if (evt.button !== 0)\n            return;\n\n        const pickResult = this.scene.pick(this.scene.pointerX, this.scene.pointerY, mesh => {\n            if (this.transEnabled) {\n                if (mesh === this.tX || mesh === this.tY || mesh === this.tZ)\n                    return true;\n            }\n            if (this.rotEnabled) {\n                if (mesh === this.rX || mesh === this.rY || mesh === this.rZ)\n                    return true;\n            }\n            if (this.scaleEnabled) {\n                if (mesh === this.sX || mesh === this.sY || mesh === this.sZ || mesh === this.sAll)\n                    return true;\n            }\n            return false;\n        }, null, this.mainCamera);\n\n        if (pickResult.hit) {\n            this.setAxisVisiblity(0);\n            this.axisPicked = pickResult.pickedMesh;\n            this.axisPicked.getChildren()[0].visibility = 1;\n\n            const name = this.axisPicked.name;\n\n            if (name === 'X') this.bXaxis.visibility = 1;\n            if (name === 'Y') this.bYaxis.visibility = 1;\n            if (name === 'Z') this.bZaxis.visibility = 1;\n            if (name === 'ALL') {\n                this.bXaxis.visibility = 1;\n                this.bYaxis.visibility = 1;\n                this.bZaxis.visibility = 1;\n            }\n\n            this.editing = true;\n            this.prevPos = this.getPosOnPickPlane();\n\n            window.setTimeout(this::this.detachControl, 0, this.mainCamera, this.canvas);\n        }\n    }\n\n    isEditing () {\n        return this.editing;\n    }\n\n    detachControl (cam, can) {\n        const camera = cam;\n        const canvas = can;\n\n        camera.detachControl(canvas);\n    }\n\n    prevOverMesh = null;\n\n    onPointerOver () {\n        if (this.pDown)\n            return;\n\n        const pickResult = this.scene.pick(this.scene.pointerX, this.scene.pointerY, mesh => {\n            if (this.transEnabled) {\n                if (mesh === this.tX || mesh === this.tY || mesh === this.tZ)\n                    return true;\n            }\n            if (this.rotEnabled) {\n                if (mesh === this.rX || mesh === this.rY || mesh === this.rZ)\n                    return true;\n            }\n            if (this.scaleEnabled) {\n                if (mesh === this.sX || mesh === this.sY || mesh === this.sZ || mesh === this.sAll)\n                    return true;\n            }\n            return false;\n        }, null, this.mainCamera);\n\n        if (pickResult.hit) {\n            if (pickResult.pickedMesh !== this.prevOverMesh) {\n                if (this.prevOverMesh !== null) {\n                    this.prevOverMesh.visibility = 0;\n                    this.restoreColor(this.prevOverMesh);\n                }\n\n                this.prevOverMesh = pickResult.pickedMesh;\n\n                if (this.rotEnabled) {\n                    this.prevOverMesh.getChildren()[0].color = Color3.White();\n                }\n                else {\n                    this.prevOverMesh.getChildren()[0].material = this.whiteMat\n                }\n\n                if (this.prevOverMesh.name === 'X') {\n                    this.xaxis.color = Color3.White();\n                }\n\n                if (this.prevOverMesh.name === 'Y') {\n                    this.yaxis.color = Color3.White();\n                }\n\n                if (this.prevOverMesh.name === 'Z') {\n                    this.zaxis.color = Color3.White();\n                }\n            }\n        }\n        else {\n            if (this.prevOverMesh !== null) {\n                this.restore(this.prevOverMesh);\n                this.prevOverMesh = null;\n            }\n        }\n    }\n\n    restoreColor (mesh) {\n        let col, mat;\n\n        if (mesh.name === 'X') {\n            col = Color3.Red();\n            mat = this.redMat;\n            this.xaxis.color = Color3.Red();\n        }\n        else if (this.prevOverMesh.name === 'Y') {\n            col = Color3.Green();\n            mat = this.greenMat;\n            this.yaxis.color = Color3.Green();\n        }\n        else if (this.prevOverMesh.name === 'Z') {\n            col = Color3.Blue();\n            mat = this.blueMat;\n            this.zaxis.color = Color3.Blue();\n        }\n        else {\n            col = Color3.Yellow();\n            mat = this.yellowMat;\n        }\n\n        if (this.rotEnabled) {\n            this.prevOverMesh.getChildren()[0].color = col;\n        }\n        else {\n            this.prevOverMesh.getChildren()[0].material = mat;\n        }\n    }\n\n    editing = false;\n\n    onPointerUp (e) {\n        this.pDown = false;\n\n        if (this.editing) {\n            this.mainCamera.attachControl(this.canvas);\n            this.editing = false;\n            this.setAxisVisiblity(1);\n            this.hideBaxis();\n            this.restoreColor(this.prevOverMesh);\n            this.prevOverMesh = null;\n            this.actHist.add();\n        }\n    }\n\n    prevPos = null;\n\n    snapX = 0;\n    snapY = 0;\n    snapZ = 0;\n    snapRX = 0;\n    snapRY = 0;\n    snapRZ = 0;\n\n    onPointerMove () {\n        if (!this.pDown || !this.ediging)\n            return;\n\n        const newPos = this.getPosOnPickPlane();\n\n        if (newPos === null)\n            return;\n\n        if (this.transEnabled)\n            this.doTranslation(newPos);\n\n        if (this.scaleEnabled && this.local)\n            this.doScaling(newPos);\n\n        if (this.rotEnabled)\n            this.doRotation(newPos);\n\n        this.prevPos = newPos;\n    }\n\n    doTranslation (newPos) {\n        const diff = newPos.subtract(this.prevPos);\n        let dl = diff.length();\n        let space;\n\n        if (this.local)\n            space = Space.LOCAL;\n        else\n            space = Space.WORLD;\n\n        if (this.axisPicked === this.tX) {\n            if (this.local)\n                dl = Vector3.Dot(diff, this.localX) / (this.localX.length() * this.meshPicked.scaling.x);\n            else\n                dl = diff.x;\n\n            if (this.snapT) {\n                this.snapX += dl;\n                dl = 0;\n                let scale = 1;\n\n                if (this.local)\n                    scale = this.meshPicked.scaling.x;\n                if (Math.abs(this.snapX) > this.transSnap / scale) {\n                    if (this.snapX > 0)\n                        dl = this.transSnap / scale;\n                    else\n                        dl = -this.transSnap / scale;\n\n                    this.snapX = 0;\n                }\n            }\n\n            if (this.local)\n                this.meshPicked.translate(Axis.X, dl, space);\n            else\n                this.meshPicked.position.x += dl;\n        }\n        if (this.axisPicked === this.tY) {\n            if (this.local)\n                dl = Vector3.Dot(diff, this.localY) / (this.localY.length() * this.meshPicked.scaling.y);\n            else\n                dl = diff.y;\n\n            if (this.snapT) {\n                this.snapY += dl;\n                dl = 0;\n                let scale = 1;\n\n                if (this.local)\n                    scale = this.meshPicked.scaling.y;\n                if (Math.abs(this.snapY) > this.transSnap / scale) {\n                    if (this.snapY > 0)\n                        dl = this.transSnap / scale;\n                    else\n                        dl = -this.transSnap / scale;\n\n                    this.snapY = 0;\n                }\n            }\n\n            if (this.local)\n                this.meshPicked.translate(Axis.Y, dl, space);\n            else\n                this.meshPicked.position.y += dl;\n        }\n        if (this.axisPicked === this.tZ) {\n            if (this.local)\n                dl = Vector3.Dot(diff, this.localZ) / (this.localZ.length() * this.meshPicked.scaling.z);\n            else\n                dl = diff.z;\n\n            if (this.snapT) {\n                this.snapZ += dl;\n                dl = 0;\n                let scale = 1;\n\n                if (this.local)\n                    scale = this.meshPicked.scaling.z;\n                if (Math.abs(this.snapZ) > this.transSnap / scale) {\n                    if (this.snapZ > 0)\n                        dl = this.transSnap / scale;\n                    else\n                        dl = -this.transSnap / scale;\n\n                    this.snapZ = 0;\n                }\n            }\n\n            if (this.local)\n                this.meshPicked.translate(Axis.Z, dl, space);\n            else\n                this.meshPicked.position.z += dl;\n        }\n    }\n\n    doScaling (newPos) {\n        const ppm = this.prevPos.subtract(this.meshPicked.position);\n        const diff = newPos.subtract(prevPos);\n        let r = diff.length() / ppm.length();\n\n        if (this.axisPicked === this.sX) {\n            const dot = Vector3.Dot(diff, this.localX);\n            if (dot >= 0)\n                this.meshPicked.scaling.x *= 1 + r;\n            else\n                this.meshPicked.scaling.x *= 1 - r;\n        }\n\n        if (this.axisPicked === this.sY) {\n            const dot = Vector3.Dot(diff, this.localY);\n            if (dot >= 0)\n                this.meshPicked.scaling.y *= 1 + r;\n            else\n                this.meshPicked.scaling.y *= 1 - r;\n        }\n\n        if (this.axisPicked === this.sZ) {\n            const dot = Vector3.Dot(diff, this.localZ);\n            if (dot >= 0)\n                this.meshPicked.scaling.z *= 1 + r;\n            else\n                this.meshPicked.scaling.z *= 1 - r;\n        }\n\n        if (this.axisPicked === this.sAll) {\n            const dot = Vector3.Dot(diff, this.mainCamera.upVector);\n            r = diff.length() / 5;\n\n            if (dot < 0) {\n                r = -1;\n            }\n\n            this.meshPicked.scaling.x *= 1 + r;\n            this.meshPicked.scaling.y *= 1 + r;\n            this.meshPicked.scaling.z *= 1 + r;\n        }\n    }\n\n    doRotation (newPos) {\n        const cN = Vector3.TransformNormal(Axis.Z, this.mainCamera.getWorldMatrix());\n\n        if (this.axisPicked === this.rX) {\n\t\t\tlet angle = this.getAngle(this.prevPos, newPos, this.meshPicked.position, cN);\n\n            if (this.snapR) {\n\t\t\t\tthis.snapRX += angle;\n\t\t\t\tangle = 0;\n\n                if (Math.abs(this.snapRX) >= this.rotSnap) {\n\t\t\t\t\tif (this.snapRX > 0)\n\t\t\t\t\t\tthis.angle = this.rotSnap;\n\t\t\t\t\telse\n\t\t\t\t\t\tangle = -this.rotSnap;\n\n                    this.snapRX = 0;\n\t\t\t\t}\n\t\t\t}\n\n            if (this.local) {\n\t\t\t\tif (Vector3.Dot(this.localX, cN) < 0)\n\t\t\t\t\tangle = -1 * angle;\n\n                this.meshPicked.rotate(Axis.X, angle, Space.LOCAL);\n\t\t\t}\n            else\n\t\t\t\tthis.meshPicked.rotate(new Vector3(cN.x, 0, 0), angle, Space.WORLD);\n\n            this.setLocalAxes(this.meshPicked);\n\t\t}\n        if (this.axisPicked === this.rY) {\n\t\t\tlet angle = this.getAngle(this.prevPos, newPos, this.meshPicked.position, cN);\n\n            if (this.snapR) {\n\t\t\t\tthis.snapRY += angle;\n\t\t\t\tangle = 0;\n\n\t\t\t\tif (Math.abs(this.snapRY) >= this.rotSnap) {\n\t\t\t\t\tif (this.snapRY > 0)\n\t\t\t\t\t\tangle = this.rotSnap;\n\t\t\t\t\telse\n\t\t\t\t\t\tangle = -this.rotSnap;\n\n\t\t\t\t\tthis.snapRY = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.local) {\n\t\t\t\tif (Vector3.Dot(this.localY, cN) < 0)\n\t\t\t\t\tangle = -1 * angle;\n\n\t\t\t\tthis.meshPicked.rotate(Axis.Y, angle, Space.LOCAL);\n\t\t\t}\n            else\n\t\t\t\tthis.meshPicked.rotate(new Vector3(0, cN.y, 0), angle, Space.WORLD);\n\n            this.setLocalAxes(this.meshPicked);\n\t\t}\n\n        if (this.axisPicked === this.rZ) {\n\t\t\tlet angle = this.getAngle(this.prevPos, newPos, this.meshPicked.position, cN);\n\n            if (this.snapR) {\n\t\t\t\tthis.snapRZ += angle;\n\t\t\t\tangle = 0;\n\n\t\t\t\tif (Math.abs(this.snapRZ) >= this.rotSnap) {\n\t\t\t\t\tif (this.snapRZ > 0)\n\t\t\t\t\t\tangle = this.rotSnap;\n\t\t\t\t\telse\n\t\t\t\t\t\tangle = -this.rotSnap;\n\n\t\t\t\t\tthis.snapRZ = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.local) {\n\t\t\t\tif (Vector3.Dot(this.localZ, cN) < 0)\n\t\t\t\t\tangle = -1 * angle;\n\t\t\t\tthis.meshPicked.rotate(Axis.Z, angle, Space.LOCAL);\n\t\t\t} else\n\t\t\t\tthis.meshPicked.rotate(new Vector3(0, 0, cN.z), angle, Space.WORLD);\n\n\t\t\tthis.setLocalAxes(this.meshPicked);\n\t\t}\n\n\t\tthis.meshPicked.rotation = this.meshPicked.rotationQuaternion.toEulerAngles();\n    }\n\n    getPosOnPickPlane () {\n        const pickinfo = this.scene.pick(this.scene.pointerX, this.scene.pointerY, mesh => {\n            return mesh === this.pickPlane;\n        }, null, this.mainCamera);\n\n        if (pickinfo.hit) {\n            return pickinfo.pickedPoint;\n        }\n\n        return null;\n    }\n\n    hideBaxis () {\n        this.bXaxis.visibility = 0;\n        this.bYaxis.visibility = 0;\n        this.bZaxis.visibility = 0;\n    }\n\n    setAxisVisiblity (v) {\n        if (this.transEnabled) {\n\t\t\tthis.tEndX.visibility = v;\n\t\t\tthis.tEndY.visibility = v;\n\t\t\tthis.tEndZ.visibility = v;\n\t\t}\n\n\t\tif (this.rotEnabled) {\n\t\t\tthis.rEndX.visibility = v;\n\t\t\tthis.rEndY.visibility = v;\n\t\t\tthis.rEndZ.visibility = v;\n\t\t}\n\n\t\tif (this.scaleEnabled) {\n\t\t\tthis.sEndX.visibility = v;\n\t\t\tthis.sEndY.visibility = v;\n\t\t\tthis.sEndZ.visibility = v;\n\t\t\tthis.sEndAll.visibility = v;\n\t\t}\n    }\n\n    transEnabled = false;\n\n    isTranslationEnabled () {\n        return this.transEnabled;\n    }\n\n    enableTranslation () {\n        if (this.tX === null) {\n\t\t\tthis.createTransAxes();\n\t\t\tthis.tCtl.parent = this.theParent;\n\t\t}\n\n\t\tif (!this.transEnabled) {\n\t\t\tthis.tEndX.visibility = 1;\n\t\t\tthis.tEndY.visibility = 1;\n\t\t\tthis.tEndZ.visibility = 1;\n\t\t\tthis.transEnabled = true;\n\n\t\t\tthis.disableRotation();\n\t\t\tthis.disableScaling();\n\t\t}\n    }\n\n    disableTranslation () {\n\t\tif (this.transEnabled) {\n\t\t\tthis.tEndX.visibility = 0;\n\t\t\tthis.tEndY.visibility = 0;\n\t\t\tthis.tEndZ.visibility = 0;\n\t\t\tthis.transEnabled = false;\n\t\t}\n\t}\n\n    rotEnabled = false;\n\n    isRotationEnabled () {\n        return this.rotEnabled;\n    }\n\n    enableRotation () {\n        if (this.rX === null) {\n            this.createRotAxes();\n            this.rCtl.parent = this.theParent;\n        }\n\n        if (!this.rotEnabled) {\n            this.rEndX.visibility = 1;\n\t\t\tthis.rEndY.visibility = 1;\n\t\t\tthis.rEndZ.visibility = 1;\n\t\t\tthis.rotEnabled = true;\n\n\t\t\tthis.disableTranslation();\n\t\t\tthis.disableScaling();\n        }\n    }\n\n    disableRotation () {\n\t\tif (this.rotEnabled) {\n\t\t\tthis.rEndX.visibility = 0;\n\t\t\tthis.rEndY.visibility = 0;\n\t\t\tthis.rEndZ.visibility = 0;\n\t\t\tthis.rotEnabled = false;\n\t\t}\n\t}\n\n    scaleEnabled = false;\n\n\tisScaleEnabled(){\n\t\treturn this.scaleEnabled;\n\t}\n\n\tenableScaling() {\n\t\tif (this.sX == null) {\n\t\t\tthis.createScaleAxes();\n\t\t\tthis.sCtl.parent = this.theParent;\n\t\t}\n\n\t\tif (!this.scaleEnabled) {\n\t\t\tthis.sEndX.visibility = 1;\n\t\t\tthis.sEndY.visibility = 1;\n\t\t\tthis.sEndZ.visibility = 1;\n\t\t\tthis.sEndAll.visibility = 1;\n\t\t\tthis.scaleEnabled = true;\n\n\t\t\tthis.disableTranslation();\n\t\t\tthis.disableRotation();\n\t\t}\n\t}\n\n\tdisableScaling () {\n\t\tif (this.scaleEnabled) {\n\t\t\tthis.sEndX.visibility = 0;\n\t\t\tthis.sEndY.visibility = 0;\n\t\t\tthis.sEndZ.visibility = 0;\n\t\t\tthis.sEndAll.visibility = 0;\n\t\t\tthis.scaleEnabled = false;\n\t\t}\n\t}\n\n    bXaxis = null;\n    bYaxis = null;\n    bZaxis = null;\n    xaxis = null;\n    yaxis = null;\n    zaxis = null;\n    guideCtl = null;\n\n    createGuideAxes () {\n        const l = this.axesLen * this.axesScale;\n\n        this.guideCtl = new Mesh('guideCtl', this.scene);\n\n        this.bXaxis = Mesh.CreateLines('xAxis', [new Vector3(-100, 0, 0), new Vector3(100, 0, 0)], this.scene);\n        this.bYaxis = Mesh.CreateLines('xAxis', [new Vector3(0, -100, 0), new Vector3(0, 100, 0)], this.scene);\n        this.bZaxis = Mesh.CreateLines('zAxis', [new Vector3(0, 0, -100), new Vector3(0, 0, 100)], this.scene);\n\n        this.bXaxis.parent = this.guideCtl;\n        this.bYaxis.parent = this.guideCtl;\n        this.bZaxis.parent = this.guideCtl;\n\n        this.bXaxis.color = Color3.Red();\n        this.bYaxis.color = Color3.Green();\n        this.bZaxis.color = Color3.Blue();\n\n        this.bXaxis.renderingGroupId = 1;\n        this.bYaxis.renderingGroupId = 1;\n        this.bZaxis.renderingGroupId = 1;\n\n        this.hideBaxis();\n\n        this.xaxis = Mesh.CreateLines('xAxis', [new Vector3(0, 0, 0), new Vector3(l, 0, 0)], this.scene);\n        this.yaxis = Mesh.CreateLines('yAxis', [new Vector3(0, 0, 0), new Vector3(0, l, 0)], this.scene);\n        this.zaxis = Mesh.CreateLines('zAxis', [new Vector3(0, 0, 0), new Vector3(0, 0, l)], this.scene);\n\n        this.xaxis.parent = this.guideCtl;\n        this.yaxis.parent = this.guideCtl;\n        this.zaxis.parent = this.guideCtl;\n\n        this.xaxis.color = Color3.Red();\n        this.yaxis.color = Color3.Green();\n        this.zaxis.color = Color3.Blue();\n\n        this.xaxis.renderingGroupId = 2;\n        this.yaxis.renderingGroupId = 2;\n        this.zaxis.renderingGroupId = 2;\n    }\n\n    pickPlane = null;\n\n    createPickPlane () {\n        this.pickPlane = Mesh.CreatePlane('axisPlane', 200, this.scene);\n        this.pickPlane.isPickable = false;\n        this.pickPlane.visibility = 0;\n        this.pickPlane.billboardMode = Mesh.BILLBOARDMODE_ALL;\n        this.pickPlane.renderingGroupId = 1;\n    }\n\n    tCtl = null;\n    tX = null;\n    tY = null;\n    tZ = null;\n    tEndX = null;\n    tEndY = null;\n    tEndZ = null;\n\n    createTransAxes () {\n        const r = 0.04;\n        const l = this.axesLen * this.axesScale;\n\n        this.tCtl = new Mesh('tarnsCtl', this.scene);\n\n\t\tthis.tX = extrudeBox(r / 2, l);\n\t\tthis.tX.name = 'X';\n\t\tthis.tY = this.tX.clone('Y');\n\t\tthis.tZ = this.tX.clone('Z');\n\n\t\tthis.tX.material = this.redMat;\n\t\tthis.tY.material = this.greenMat;\n\t\tthis.tZ.material = this.blueMat;\n\n\t\tthis.tX.parent = this.tCtl;\n\t\tthis.tY.parent = this.tCtl;\n\t\tthis.tZ.parent = this.tCtl;\n\n\t\tthis.tX.rotation.y = 1.57;\n\t\tthis.tY.rotation.x -= 1.57;\n\n\t\tthis.tX.visibility = 0;\n\t\tthis.tY.visibility = 0;\n\t\tthis.tZ.visibility = 0;\n\n\t\tthis.tX.renderingGroupId = 1;\n\t\tthis.tY.renderingGroupId = 1;\n\t\tthis.tZ.renderingGroupId = 1;\n\n\t\tthis.tX.isPickable = false;\n\t\tthis.tY.isPickable = false;\n\t\tthis.tZ.isPickable = false;\n\n        const cl = l * this.axesScale / 4;\n        const cr = r * this.axesScale;\n\n        this.tEndX = Mesh.CreateCylinder('tEndX', cl, 0, cr, 6, 1, this.scene);\n\t\tthis.tEndY = tEndX.clone('tEndY');\n\t\tthis.tEndZ = tEndX.clone('tEndZ');\n\n\t\tthis.tEndX.rotation.x = 1.57;\n\t\tthis.tEndY.rotation.x = 1.57;\n\t\tthis.tEndZ.rotation.x = 1.57;\n\n\t\tthis.tEndX.parent = this.tX;\n\t\tthis.tEndY.parent = this.tY;\n\t\tthis.tEndZ.parent = this.tZ;\n\n\t\tthis.tEndX.position.z = l - cl / 2;\n\t\tthis.tEndY.position.z = l - cl / 2;\n\t\tthis.tEndZ.position.z = l - cl / 2;\n\n\t\tthis.tEndX.material = this.redMat;\n\t\tthis.tEndY.material = this.greenMat;\n\t\tthis.tEndZ.material = this.blueMat;\n\n\t\tthis.tEndX.renderingGroupId = 1;\n\t\tthis.tEndY.renderingGroupId = 1;\n\t\tthis.tEndZ.renderingGroupId = 1;\n\n\t\tthis.tEndX.isPickable = false;\n\t\tthis.tEndY.isPickable = false;\n\t\tthis.tEndZ.isPickable = false;\n    }\n\n    rCtl = null;\n    rX = null;\n    rY = null;\n    rZ = null;\n    rEndX = null;\n    rEndY = null;\n    rEndZ = null;\n\n    createRotAxes () {\n        const r = 0.04;\n        const d = this.axesLen * this.axesScale * 2;\n\n        this.rCtl = new Mesh('rotCtl', this.scene);\n\n\t\tthis.rX = Mesh.CreateTorus('X', d, r, 30, this.scene);\n\t\tthis.rY = rX.clone('Y');\n\t\tthis.rZ = rX.clone('Z');\n\n\t\tthis.rX.material = this.redMat;\n\t\tthis.rY.material = this.greenMat;\n\t\tthis.rZ.material = this.blueMat;\n\n\t\tthis.rX.parent = this.rCtl;\n\t\tthis.rY.parent = this.rCtl;\n\t\tthis.rZ.parent = this.rCtl;\n\n\t\tthis.rX.rotation.z -= 1.57;\n\t\tthis.rZ.rotation.x = 1.57;\n\n\t\tthis.rX.visibility = 0;\n\t\tthis.rY.visibility = 0;\n\t\tthis.rZ.visibility = 0;\n\n\t\tthis.rX.renderingGroupId = 1;\n\t\tthis.rY.renderingGroupId = 1;\n\t\tthis.rZ.renderingGroupId = 1;\n\n\t\tthis.rX.isPickable = false;\n\t\tthis.rY.isPickable = false;\n\t\tthis.rZ.isPickable = false;\n\n        const cl = d;\n\n        this.rEndX = this.createCircle(cl / 2);\n        this.rEndY = this.rEndX.clone('');\n        this.rEndZ = this.rEndX.clone('');\n\n        this.rEndX.parent = this.rX;\n        this.rEndY.parent = this.rY;\n        this.rEndZ.parent = this.rZ;\n\n        this.rEndX.rotation.x = 1.57;\n\t\tthis.rEndY.rotation.x = 1.57;\n\t\tthis.rEndZ.rotation.x = 1.57;\n\n\t\tthis.rEndX.color = Color3.Red();\n\t\tthis.rEndY.color = Color3.Green();\n\t\tthis.rEndZ.color = Color3.Blue();\n\n\t\tthis.rEndX.renderingGroupId = 1;\n\t\tthis.rEndY.renderingGroupId = 1;\n\t\tthis.rEndZ.renderingGroupId = 1;\n\n\t\tthis.rEndX.isPickable = false;\n\t\tthis.rEndY.isPickable = false;\n\t\tthis.rEndZ.isPickable = false;\n    }\n\n    extrudeBox (w, l) {\n        const shape = [\n            new Vector3(w, w, 0),\n            new Vector3(-w, w, 0),\n            new Vector3(-w, -w, 0),\n            new Vector3(w, -w, 0),\n            new Vector3(w, w, 0)\n        ];\n        const path = [\n            new Vector3(0, 0, 0),\n            new Vector3(0, 0, l)\n        ];\n        const box = Mesh.ExtrudeShape('', shape, path, 1, 0, 2, this.scene);\n\n        return box;\n    }\n\n    createCircle (r) {\n        const points = [];\n        const a = Math.PI / 180;\n        let x = 0, y = 0, p = 0;\n\n        for (let i = 0; i <= 360; i += 10) {\n            x = r * Math.cos(i * 1);\n\n            if (i === 90)\n                y = r;\n            else if (i === 270)\n                y = -r;\n            else\n                y = r * Math.sin(i * a);\n\n            points[p] = new Vector3(x, y, 0);\n            p++;\n        }\n\n        const circle = Mesh.CreateLines('', points, this.scene);\n\n        return circle;\n    }\n\n    sCtl = null;\n    sX = null;\n    sY = null;\n    sZ = null;\n    sAll = null;\n    sEndX = null;\n    sEndY = null;\n    sEndZ = null;\n    sEndAll = null;\n\n    createScaleAxes () {\n        const r = 0.04;\n        const l = this.axesLen * this.axesScale;\n\n        this.sCtl = new Mesh('sCtl', this.scene);\n\t\tthis.sAll = Mesh.CreateBox('ALL', r * 2, this.scene);\n\n\t\tthis.sX = extrudeBox(r / 2, l);\n\t\tthis.sX.name = 'X';\n\t\tthis.sY = this.sX.clone('Y');\n\t\tthis.sZ = this.sX.clone('Z');\n\n\t\tthis.sX.material = this.redMat;\n\t\tthis.sY.material = this.greenMat;\n\t\tthis.sZ.material = this.blueMat;\n\t\tthis.sAll.material = this.yellowMat;\n\n\t\tthis.sX.parent = this.sCtl;\n\t\tthis.sY.parent = this.sCtl;\n\t\tthis.sZ.parent = this.sCtl;\n\t\tthis.sAll.parent = this.sCtl;\n\n\t\tthis.sX.rotation.y = 1.57;\n\t\tthis.sY.rotation.x -= 1.57;\n\n\t\tthis.sX.visibility = 0;\n\t\tthis.sY.visibility = 0;\n\t\tthis.sZ.visibility = 0;\n\t\tthis.sAll.visibility = 0;\n\n\t\tthis.sX.renderingGroupId = 1;\n\t\tthis.sY.renderingGroupId = 1;\n\t\tthis.sZ.renderingGroupId = 1;\n\t\tthis.sAll.renderingGroupId = 1;\n\n\t\tthis.sX.isPickable = false;\n\t\tthis.sY.isPickable = false;\n\t\tthis.sZ.isPickable = false;\n\t\tthis.sAll.isPickable = false;\n\n        const cr = r * this.axesScale;\n\n\t\tthis.sEndX = Mesh.CreateBox('', cr, this.scene);\n\t\tthis.sEndY = sEndX.clone('');\n\t\tthis.sEndZ = sEndX.clone('');\n\t\tthis.sEndAll = sEndX.clone('');\n\n\t\tthis.sEndX.parent = this.sX;\n\t\tthis.sEndY.parent = this.sY;\n\t\tthis.sEndZ.parent = this.sZ;\n\t\tthis.sEndAll.parent = this.sAll;\n\n\t\tthis.sEndX.position.z = l - cr / 2;\n\t\tthis.sEndY.position.z = l - cr / 2;\n\t\tthis.sEndZ.position.z = l - cr / 2;\n\n\t\tthis.sEndX.material = this.redMat;\n\t\tthis.sEndY.material = this.greenMat;\n\t\tthis.sEndZ.material = this.blueMat;\n\t\tthis.sEndAll.material = this.yellowMat;\n\n\t\tthis.sEndX.renderingGroupId = 1;\n\t\tthis.sEndY.renderingGroupId = 1;\n\t\tthis.sEndZ.renderingGroupId = 1;\n\t\tthis.sEndAll.renderingGroupId = 1;\n\n\t\tthis.sEndX.isPickable = false;\n\t\tthis.sEndY.isPickable = false;\n\t\tthis.sEndZ.isPickable = false;\n\t\tthis.sEndAll.isPickable = false;\n    }\n\n    localX = null;\n    localY = null;\n    localZ = null;\n    localRot = null;\n\n    setLocalAxes (mesh) {\n        const meshMatrix = mesh.getWorldMatrix();\n\t\tconst pos = mesh.position;\n\n\t\tthis.localX = Vector3.TransformCoordinates(Axis.X, meshMatrix).subtract(pos);\n\t\tthis.localY = Vector3.TransformCoordinates(Axis.Y, meshMatrix).subtract(pos);\n\t\tthis.localZ = Vector3.TransformCoordinates(Axis.Z, meshMatrix).subtract(pos);\n\t\tthis.localRot = Vector3.RotationFromAxis(this.localX, this.localY, this.localZ);\n\n        if (this.local)\n\t\t\tthis.theParent.rotation.copyFrom(this.localRot);\n    }\n\n    setLocal(l) {\n\t\tif (this.local === l)\n\t\t\treturn;\n\n\t\tthis.local = l;\n\n\t\tif (this.local)\n\t\t\tthis.theParent.rotation.copyFrom(this.localRot);\n\t\telse\n\t\t\tthis.theParent.rotation.copyFrom(Vector3.Zero());\n\t}\n\n    isLocal (){\n\t\treturn this.local;\n\t}\n\n\tsetTransSnap (s) {\n\t\tthis.snapT = s;\n\t}\n\n\tsetRotSnap (s) {\n\t\tthis.snapR = s;\n\t}\n\n\tsetTransSnapValue (t) {\n\t\tthis.transSnap = t;\n\t}\n\n\tsetRotSnapValue (r) {\n\t\tthis.rotSnap = r;\n\t}\n\n    setAxesScale () {\n        const distFromCamera = 2;\n        const toParent = this.theParent.position.subtract(this.mainCamera.position)\n        const cameraNormal = Vector3.TransformNormal(Axis.Z, this.mainCamera.getWorldMatrix());\n        const parentOnNormal = Vector3.Dot(toParent, cameraNormal) / cameraNormal.length();\n        const s = parentOnNormal / distFromCamera;\n        const scale = new Vector3(s, s, s);\n\n        this.theParent.scaling = scale;\n    }\n\n    getAngle (p1, p2, p, cN) {\n        const v1 = p1.subtract(p);\n\t\tconst v2 = p2.subtract(p);\n\t\tconst n = Vector3.Cross(v1, v2);\n\t\tlet angle = Math.asin(n.length() / (v1.length() * v2.length()));\n\n\t\tif (Vector3.Dot(n, cN) < 0) {\n\t\t\tangle = -1 * angle;\n\t\t}\n\n\t\treturn angle;\n    }\n\n    createMaterials (scene) {\n        this.redMat = this.getStandardMaterial('redMat', Color3.Red(), scene);\n\t\tthis.greenMat = this.getStandardMaterial('greenMat', Color3.Green(), scene);\n\t\tthis.blueMat = this.getStandardMaterial('blueMat', Color3.Blue(), scene);\n\t\tthis.whiteMat = this.getStandardMaterial('whiteMat', Color3.White(), scene);\n\t\tthis.yellowMat = this.getStandardMaterial('whiteMat', Color3.Yellow(), scene);\n    }\n\n    disposeMaterials () {\n        this.redMat.dispose();\n\t\tthis.greenMat.dispose();\n\t\tthis.blueMat.dispose();\n\t\tthis.whiteMat.dispose();\n\t\tthis.yellowMat.dispose();\n    }\n\n    getStandardMaterial (name, col, scene) {\n        const mat = new StandardMaterial(name, scene);\n        mat.emissiveColor = col;\n        mat.diffuseColor = Color3.Black();\n        mat.specularColor = Color3.Black();\n\n        return mat;\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/editcontrol.js\n **/","module.exports = require(\"babylonjs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babylonjs\"\n ** module id = 1\n ** module chunks = 0\n **/","import BABYLON from 'babylonjs';\nimport Act from './act';\n\nconst { Quaternion } = BABYLON;\n\nexport default class ActHist {\n\n    mesh = null;\n    lastMax = 10;\n    acts = [];\n    last = -1;\n    current = -1;\n\n    constructor (mesh, capacity) {\n        this.mesh = mesh;\n        this.lastMax = capacity - 1;\n\n        if (mesh.rotationQuaternion === null) {\n            if (mesh.rotation !== null) {\n                mesh.rotationQuaternion = Quaternion.RotationYawPitchRoll(mesh.rotation.y, mesh.rotation.x, mesh.rotation.z);\n            }\n        }\n\n        this.add();\n    }\n\n    setCapacity (c) {\n        if (c === 0){\n\t\t\tconsole.error(\"capacity should be more than zero\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastMax = c - 1;\n\t\tthis.last = -1;\n\t\tthis.current = -1;\n\t\tthis.acts = [];\n\n\t\tthis.add();\n    }\n\n    add () {\n        const act = new Act(this.mesh);\n\n        if (this.current < this.last) {\n            this.acts.splice(current + 1);\n            this.late = this.current;\n        }\n\n        if (this.last === this.lastMax) {\n            this.acts.shift();\n            this.acts.push(act);\n        }\n        else {\n            this.acts.push(act);\n            this.last++;\n            this.current++;\n        }\n    }\n\n    undo () {\n\t\tif (this.current > 0){\n\t\t\tthis.current--;\n\t\t\tthis.acts[this.current].perform(this.mesh);\n\t\t}\n\t}\n\n\tredo () {\n\t\tif (this.current < this.last){\n\t\t\tthis.current++;\n\t\t\tthis.acts[this.current].perform(this.mesh);\n\t\t}\n\t}\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/acthist.js\n **/","export default class Act{\n\n\tp = null;\n    r = null;\n    s = null;\n\n\tconstructor (mesh) {\n\t\tthis.p = mesh.position.Clone();\n\t\tthis.r = mesh.rotationQuaternion.Clone();\n\t\tthis.s = mesh.scaling.Clone();\n\t}\n\n\tperform (mesh) {\n\t\tmesh.position = this.p.Clone();\n\t\tmesh.rotationQuaternion = this.r.Clone();\n\t\tmesh.scaling = s.Clone();\n\t}\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/act.js\n **/"],"sourceRoot":""}